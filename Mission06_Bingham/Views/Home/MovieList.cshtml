@* This page contains all of the information for all of the movies in the database and buttons to edit and delete *@

@model List<Movie>

@if (Model == null || !Model.Any())
{
    <p>No movies found.</p>
}
else
{
    <table class="table table-striped table-bordered table-hover">
        <thead class="fw-bold">
            <tr>
                <th>Category</th>
                <th>Title</th>
                <th>Year</th>
                <th>Director</th>
                <th>Rating</th>
                <th>Edited</th>
                <th>LentTo</th>
                <th>CopiedToPlex</th>
                <th>Notes</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var x in Model)
            {
                @* The following gets all the data and checks if it is null *@
                <tr>
                    <td>@(x.Category?.CategoryName ?? "N/A")</td>  @* Ensure Category isn't null, fallback to "N/A" *@
                    <td>@(x.Title ?? "N/A")</td>  @* Handle null Title, fallback to "N/A" *@
                    <td>@(x.Year == 0 ? "N/A" : x.Year.ToString())</td>  @* Check if Year is 0 (default), fallback to "N/A" *@
                    <td>@(x.Director ?? "N/A")</td>  @* Handle NULL in Director, fallback to "N/A" *@
                    <td>@(x.Rating ?? "N/A")</td>  @* Handle NULL in Rating, fallback to "N/A" *@
                    <td>@(x.Edited.HasValue ? (x.Edited.Value ? "Yes" : "No") : "N/A")</td>  @* Handle boolean field Edited, fallback to "N/A" if null *@
                    <td>@(x.LentTo ?? "N/A")</td>  @* Handle NULL in LentTo, fallback to "N/A" *@
                    <td>@(x.CopiedToPlex.HasValue ? (x.CopiedToPlex.Value ? "Yes" : "No") : "N/A")</td>  @* Handle boolean field CopiedToPlex, fallback to "N/A" if null *@
                    <td>@(x.Notes ?? "N/A")</td>  @* Handle NULL in Notes, fallback to "N/A" *@
                    <td>
                        <a class="btn btn-info btn-sm me-4" asp-controller="Home" asp-action="Edit" asp-route-id="@x.MovieId">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                        <br />
                        <a class="btn btn-danger btn-sm me-4" asp-controller="Home" asp-action="Delete" asp-route-id="@x.MovieId">
                            <i class="fas fa-trash-alt"></i> Delete
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
